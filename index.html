<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>portfolio | nirav</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha512-Fo3rlalH9Fp0+4wK1i4f8sVb5h5x5G1t0mB5t1G7o4/8w5g6m7E+7u+z5r+Q6+5X9y7f5r+g7+4Q3+8Q+6Q1A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      /* Dark Mode (default) */
      --bg: #050505;
      --text: #e0e0e0;
      --accent: #3b82f6;
      --accent-glow: rgba(59, 130, 246, 0.5);
      --secondary: #1f2937;
      --muted: #9ca3af;
      --card-bg: rgba(20, 20, 20, 0.6);
      --card-border: rgba(255, 255, 255, 0.1);
      --hover-bg: rgba(255, 255, 255, 0.05);
      --grid-color: rgba(255, 255, 255, 0.02);
    }

    /* Light Mode - Warm, Easy on Eyes */
    body.light-mode {
      --bg: #f8f7f4;
      --text: #1a1a1a;
      --accent: #2563eb;
      --accent-glow: rgba(37, 99, 235, 0.3);
      --secondary: #e5e7eb;
      --muted: #6b7280;
      --card-bg: rgba(255, 255, 255, 0.8);
      --card-border: rgba(0, 0, 0, 0.08);
      --hover-bg: rgba(0, 0, 0, 0.03);
      --grid-color: rgba(0, 0, 0, 0.03);
    }

    body.light-mode {
      background-image:
        radial-gradient(ellipse 80% 50% at 20% 80%, rgba(37, 99, 235, 0.08), transparent),
        radial-gradient(ellipse 60% 40% at 80% 20%, rgba(139, 92, 246, 0.06), transparent),
        linear-gradient(var(--grid-color) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      background-color: var(--bg);
      background-image:
        /* Warm orbs - friendly */
        radial-gradient(ellipse 80% 50% at 20% 80%, rgba(139, 92, 246, 0.15), transparent),
        radial-gradient(ellipse 60% 40% at 80% 20%, rgba(59, 130, 246, 0.12), transparent),
        /* Sharp grid - intelligent */
        linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
      background-size: 100% 100%, 100% 100%, 40px 40px, 40px 40px;
      background-position: 0 0, 0 0, -1px -1px, -1px -1px;
      color: var(--text);
      font-family: 'Geist', -apple-system, BlinkMacSystemFont, sans-serif;
      font-weight: 300;
      overflow-x: hidden;
      line-height: 1.6;
      scroll-behavior: smooth;
      min-height: 100vh;
      /* No animation - lazy elegance */
    }

    /* Ultra Minimalist Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2rem 4rem;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
    }

    header h2 {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 400;
      font-size: 1rem;
      letter-spacing: -0.5px;
      color: var(--text);
    }

    nav a {
      margin-left: 3rem;
      text-decoration: none;
      color: var(--muted);
      transition: color 0.2s ease;
      font-weight: 300;
      font-size: 0.9rem;
      letter-spacing: -0.3px;
    }

    nav a:hover {
      color: var(--text);
    }

    /* Ultra Minimalist Hero */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 4rem 2rem;
      background: var(--bg);
      position: relative;
    }

    .hero-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }

    .hero-text {
      position: relative;
      z-index: 1;
    }

    .hero-greeting {
      font-family: 'Fira Code', monospace;
      font-size: 1.2rem;
      color: var(--accent);
      margin-bottom: 1rem;
      font-weight: 500;
    }

    .hero-text h1 {
      font-size: 2.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      background: linear-gradient(90deg, #e0e0e0, #3b82f6);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      line-height: 1.2;
      text-transform: lowercase;
    }

    .hero-subtitle {
      font-size: 1.2rem;
      color: var(--muted);
      margin-bottom: 2rem;
      font-weight: 400;
      text-transform: lowercase;
    }

    .hero-description {
      margin-bottom: 2.5rem;
      max-width: 500px;
    }

    .hero-description p {
      font-size: 1rem;
      line-height: 1.6;
      color: var(--muted);
      text-transform: lowercase;
    }

    .hero-links {
      display: flex;
      gap: 2rem;
    }

    .hero-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text);
      text-decoration: none;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .hero-link:hover {
      color: var(--accent);
    }

    .hero-link:hover .link-arrow {
      transform: translateX(4px);
    }

    .link-arrow {
      transition: transform 0.3s ease;
    }

    .hero-visual {
      position: relative;
    }

    .code-block {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 2rem;
      font-family: 'Fira Code', monospace;
      font-size: 0.9rem;
      line-height: 1.6;
      overflow: hidden;
      border: 1px solid var(--card-border);
      backdrop-filter: blur(10px);
    }

    .code-block pre {
      margin: 0;
    }

    .code-block code {
      color: var(--text);
    }

    .code-block .keyword {
      color: var(--accent);
    }

    .code-block .string {
      color: var(--secondary);
    }

    @media (max-width: 1024px) {
      .hero-content {
        grid-template-columns: 1fr;
        gap: 3rem;
      }

      .hero-visual {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .hero {
        padding: 2rem 1rem;
      }

      .hero-text h1 {
        font-size: 2rem;
      }

      .hero-links {
        flex-direction: column;
        gap: 1rem;
      }
    }

    /* Ultra Minimalist Card Slider */
    .card-slider-container {
      position: relative;
      width: 100%;
      overflow: hidden;
      padding: 2rem 0;
    }

    .card-slider {
      display: flex;
      gap: 2rem;
      animation: slide 40s linear infinite;
      width: max-content;
    }

    .card-slider:hover {
      animation-play-state: paused;
    }

    @keyframes slide {
      0% {
        transform: translateX(0);
      }

      100% {
        transform: translateX(calc(-300px * 6));
      }
    }

    .slider-card {
      width: 300px;
      min-width: 300px;
      height: 400px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    .slider-card:hover {
      border-color: var(--text);
    }

    /* Ultra Minimalist Section Styles */
    .section-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .section-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    .section-card:hover {
      border-color: var(--text);
    }

    .section-card h3 {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--text);
      font-weight: 400;
    }

    .section-card p {
      color: var(--muted);
      line-height: 1.6;
      font-size: 0.95rem;
    }

    /* Ultra Minimalist Blog Cards */
    .blog-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(12px);
    }

    .blog-card:hover {
      border-color: var(--text);
    }

    .blog-card h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: var(--text);
      font-weight: 400;
    }

    .blog-card .date {
      color: var(--muted);
      font-size: 0.85rem;
      margin-bottom: 1rem;
    }

    .blog-card .tags {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .blog-card .tag {
      color: var(--muted);
      font-size: 0.8rem;
    }

    /* Ultra Minimalist Research Cards */
    .research-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(12px);
    }

    .research-card:hover {
      border-color: var(--text);
    }

    .research-card .metrics {
      display: flex;
      gap: 2rem;
      margin-top: 1.5rem;
    }

    .research-card .metric {
      text-align: left;
    }

    .research-card .metric-value {
      font-size: 1.2rem;
      font-weight: 400;
      color: var(--text);
    }

    .research-card .metric-label {
      font-size: 0.85rem;
      color: var(--muted);
    }

    /* Ultra Minimalist Contact Cards */
    .contact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .contact-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 2rem;
      text-align: left;
      transition: all 0.3s ease;
      backdrop-filter: blur(12px);
    }

    .contact-card:hover {
      border-color: var(--text);
    }

    .contact-card .icon {
      font-size: 1.2rem;
      color: var(--muted);
      margin-bottom: 1rem;
    }

    .contact-card h3 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
      color: var(--text);
      font-weight: 400;
    }

    .contact-card p {
      color: var(--muted);
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
    }

    .contact-card a {
      color: var(--text);
      text-decoration: none;
      font-size: 0.85rem;
    }

    .contact-card a:hover {
      text-decoration: underline;
    }

    /* Ultra Minimalist Section Titles */
    h2.section-title {
      font-size: 1.8rem;
      font-weight: 400;
      margin-bottom: 3rem;
      text-align: center;
      color: var(--text);
      letter-spacing: -1px;
    }

    /* Ultra Minimalist Section Layout */
    section {
      padding: 8rem 4rem;
      max-width: 1200px;
      margin: auto;
    }

    /* Ultra Minimalist Footer */
    footer {
      text-align: center;
      padding: 4rem 1rem;
      color: var(--muted);
      font-size: 0.85rem;
      border-top: 1px solid var(--card-border);
    }

    .social-links {
      margin: 2rem 0;
      display: flex;
      justify-content: center;
      gap: 2rem;
    }

    .social-links a {
      color: var(--muted);
      font-size: 1.1rem;
      transition: color 0.2s ease;
    }

    .social-links a:hover {
      color: var(--text);
    }

    /* Ultra Minimalist Mobile Navigation */
    @media (max-width: 768px) {
      header {
        padding: 1.5rem;
      }

      .hero h1 {
        font-size: 2.2rem;
      }

      section {
        padding: 4rem 1.5rem;
      }

      .mobile-nav-fabs .main-fab,
      .mobile-nav-fabs .section-fab {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
      }
    }

    /* Modern Glassmorphism Card Style */
    .project-card,
    .about-card,
    .contact-form {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
    }

    .project-card:hover,
    .about-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      border-color: var(--accent);
    }

    /* Ultra Minimalist CTA Buttons */
    .cta {
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .cta button {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 0.8rem 1.5rem;
      font-weight: 400;
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 4px;
      font-size: 0.9rem;
      letter-spacing: -0.2px;
      box-shadow: 0 0 10px var(--accent-glow);
    }

    .cta button:hover {
      background: var(--text);
      color: var(--bg);
    }

    /* Ultra Minimalist Card Hover Effects */
    .slider-card,
    .section-card,
    .blog-card,
    .research-card,
    .contact-card {
      transform-style: preserve-3d;
      perspective: 1000px;
      transition: transform 0.3s ease;
    }

    .slider-card:hover,
    .section-card:hover,
    .blog-card:hover,
    .research-card:hover,
    .contact-card:hover {
      transform: rotate3d(var(--rotate-x, 0), var(--rotate-y, 0), 0, 10deg);
    }

    /* Ultra Minimalist Contact Form */
    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 0.8rem;
      margin-bottom: 1.5rem;
      background: none;
      border: 1px solid var(--card-border);
      color: var(--text);
      border-radius: 4px;
      transition: all 0.2s ease;
      font-family: 'Geist', sans-serif;
      font-weight: 300;
      font-size: 0.9rem;
    }

    .contact-form input:focus,
    .contact-form textarea:focus {
      outline: none;
      border-color: var(--text);
    }

    .contact-form button {
      background: none;
      border: 1px solid var(--text);
      color: var(--text);
      padding: 0.8rem 1.5rem;
      font-weight: 300;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Geist', sans-serif;
      font-size: 0.9rem;
    }

    .contact-form button:hover {
      background: var(--text);
      color: var(--bg);
    }

    /* Ultra Minimalist Modal Buttons */
    .mood-theme-modal-content #analyzeBtn {
      background: none;
      border: 1px solid var(--text);
      color: var(--text);
      padding: 0.8rem 1.5rem;
      font-weight: 300;
      cursor: pointer;
      transition: all 0.2s ease;
      border-radius: 4px;
      font-size: 0.9rem;
      letter-spacing: -0.2px;
    }

    .mood-theme-modal-content #analyzeBtn:hover {
      background: var(--text);
      color: var(--bg);
    }

    .mood-theme-modal-content #analyzeBtn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: none;
      color: var(--muted);
      border-color: var(--muted);
    }

    .mood-theme-modal-content .mode-toggle {
      display: flex;
      border: 1px solid var(--card-border);
      border-radius: 4px;
      overflow: hidden;
    }

    .mood-theme-modal-content .mode-toggle button {
      padding: 0.8rem 1.5rem;
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.9rem;
      font-family: 'Geist', sans-serif;
      font-weight: 300;
    }

    .mood-theme-modal-content .mode-toggle button.active {
      background: var(--text);
      color: var(--bg);
    }

    .mood-theme-modal-content .mode-toggle button:hover:not(.active) {
      background: var(--hover-bg);
      color: var(--text);
    }

    /* AI Mood Theme Trigger (Floating Icon - Right) */
    #moodThemeTrigger {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background-color: var(--accent);
      color: var(--bg);
      border: none;
      border-radius: 50%;
      /* Make it a circle */
      width: 50px;
      height: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transition: opacity 0.5s ease, transform 0.5s ease;
      opacity: 0;
      /* Hidden by default */
      pointer-events: none;
      /* Make it non-interactive when hidden */
      z-index: 1000;
      /* Ensure it's on top */
    }

    #moodThemeTrigger.show {
      opacity: 1;
      pointer-events: auto;
      /* Make it interactive when shown */
    }

    #moodThemeTrigger:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    /* AI Mood Theme Modal (Popup) */
    .mood-theme-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      /* Dimmed background */
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1001;
      /* Above trigger */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      backdrop-filter: blur(5px);
      /* Subtle blur effect */
    }

    .mood-theme-modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .mood-theme-modal-content {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      padding: 2.5rem;
      /* Increased padding */
      width: 90%;
      max-width: 500px;
      position: relative;
      transform: translateY(-20px);
      /* Initial position for slide-in effect */
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(0, 0, 0, 0.1);
      /* Enhanced shadow */
    }

    .mood-theme-modal-overlay.open .mood-theme-modal-content {
      opacity: 1;
      transform: translateY(0);
    }

    .mood-theme-modal-content h2.section-title {
      margin-top: 0;
      /* Override default section-title margin */
      margin-bottom: 1.5rem;
      /* Consistent spacing */
      font-size: 1.8rem;
      /* Slightly smaller for popup context */
    }

    .mood-theme-modal-content p {
      margin-bottom: 1.5rem;
      /* Consistent spacing for description */
    }

    .mood-theme-modal-content .close-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--muted);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .mood-theme-modal-content .close-button:hover {
      color: var(--accent);
    }

    /* Styles for elements inside the modal */
    .mood-theme-modal-content #emotionInput {
      width: 100%;
      padding: 0.9rem 1.2rem;
      /* Increased padding for input */
      margin-bottom: 1.5rem;
      /* Consistent spacing */
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text);
      border-radius: 8px;
      /* More rounded corners */
      font-family: 'Geist', sans-serif;
      font-weight: 300;
      font-size: 1rem;
      transition: border-color 0.3s ease, background 0.3s ease;
    }

    .mood-theme-modal-content #emotionInput:focus {
      outline: none;
      border-color: var(--accent);
      /* Accent border on focus */
      background: var(--card-bg);
      /* Slight background change on focus */
    }

    .mood-theme-modal-content #emotionInput::placeholder {
      color: var(--muted);
    }

    .mood-theme-modal-content .theme-controls {
      display: flex;
      gap: 1rem;
      /* Increased gap */
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 1.5rem;
      /* Consistent spacing */
    }

    /* Mood Result display */
    .mood-theme-modal-content .mood-result {
      margin-top: 1.5rem;
      /* Consistent spacing */
      padding: 1.2rem;
      /* Increased padding */
      border-radius: 8px;
      /* Consistent border-radius */
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      font-size: 0.95rem;
      /* Slightly larger text */
    }

    .mood-theme-modal-content .mood-result #moodText {
      margin-bottom: 0.5rem;
    }

    .mood-theme-modal-content .mood-result .confidence-bar {
      background: var(--card-bg);
      height: 10px;
      /* Thicker bar */
      border-radius: 5px;
      /* Rounded ends */
    }

    .mood-theme-modal-content .mood-result .confidence-fill {
      background: linear-gradient(90deg, var(--accent) 0%, var(--secondary) 100%);
      /* Maintain gradient */
      border-radius: 5px;
      /* Match bar background */
    }

    .mood-theme-modal-content .mood-result #confidenceText {
      margin-top: 0.8rem;
      font-size: 0.85em;
      /* Slightly larger confidence text */
      color: var(--muted);
    }

    /* Mobile Navigation FABs (Left side) */
    .mobile-nav-fabs {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 999;
      /* Below modal, above other content */
      opacity: 0;
      /* Hidden by default on desktop */
      pointer-events: none;
      /* Non-interactive on desktop */
      visibility: hidden;
      /* Ensure it's not visible for screen readers etc. */
    }

    .mobile-nav-fabs .main-fab,
    .mobile-nav-fabs .section-fab {
      background-color: var(--secondary);
      /* Use secondary accent for menu FABs */
      color: var(--bg);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.4rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      position: absolute;
      /* Allows for relative positioning */
      bottom: 0;
      left: 0;
    }

    .mobile-nav-fabs .main-fab:hover,
    .mobile-nav-fabs .section-fab:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    /* Initial state for section FABs (hidden behind main FAB) */
    .mobile-nav-fabs .section-fab {
      opacity: 0;
      transform: translateY(0);
      /* Initial position */
      pointer-events: none;
      background-color: rgba(139, 195, 74, 0.8);
      /* Slightly transparent secondary */
      font-size: 1.2rem;
      transition: transform 0.3s ease, opacity 0.3s ease, background-color 0.3s ease;
    }

    /* Active state for main FAB - rotate icon */
    .mobile-nav-fabs.open .main-fab i {
      transform: rotate(90deg);
      /* Rotate for close icon */
    }

    /* Open state for section FABs - reveal in a stack */
    .mobile-nav-fabs.open #fabContact {
      opacity: 1;
      transform: translateY(-60px);
      /* Stack vertically */
      pointer-events: auto;
    }

    .mobile-nav-fabs.open #fabMLResearch {
      opacity: 1;
      transform: translateY(-120px);
      pointer-events: auto;
    }

    .mobile-nav-fabs.open #fabAbout {
      opacity: 1;
      transform: translateY(-180px);
      pointer-events: auto;
    }

    .mobile-nav-fabs.open #fabProjects {
      opacity: 1;
      transform: translateY(-240px);
      pointer-events: auto;
    }

    @media (max-width: 768px) {
      header nav {
        display: none;
        /* Hide desktop nav on mobile */
      }

      .theme-controls {
        flex-direction: column;
        gap: 1rem;
      }

      .mood-theme-modal-content #analyzeBtn,
      .mood-theme-modal-content .mode-toggle {
        width: 100%;
        /* Ensure buttons stack nicely on mobile */
      }

      .hero h1 {
        font-size: 2rem;
      }

      header {
        padding: 2rem 1rem 1rem 1rem;
      }

      #moodThemeTrigger {
        width: 45px;
        height: 45px;
        font-size: 1.3rem;
        bottom: 1.5rem;
        right: 1.5rem;
        opacity: 1;
        /* Always show trigger on mobile */
        pointer-events: auto;
      }

      .mood-theme-modal-content {
        padding: 1.5rem;
      }

      .mood-theme-modal-content h2.section-title {
        font-size: 1.5rem;
      }

      /* Show mobile nav FABs on mobile */
      .mobile-nav-fabs {
        opacity: 1;
        pointer-events: auto;
        visibility: visible;
        bottom: 1.5rem;
        /* Match trigger bottom */
        left: 1.5rem;
        /* Position on left */
      }

      .mobile-nav-fabs .main-fab,
      .mobile-nav-fabs .section-fab {
        width: 45px;
        height: 45px;
        font-size: 1.3rem;
      }

      .mobile-nav-fabs.open #fabContact {
        transform: translateY(-55px);
      }

      .mobile-nav-fabs.open #fabMLResearch {
        transform: translateY(-110px);
      }

      .mobile-nav-fabs.open #fabAbout {
        transform: translateY(-165px);
      }

      .mobile-nav-fabs.open #fabProjects {
        transform: translateY(-220px);
      }
    }

    /* Modern Card Slider */
    .card-slider-container {
      position: relative;
      width: 100%;
      overflow: hidden;
      padding: 2rem 0;
    }

    .card-slider {
      display: flex;
      gap: 2rem;
      animation: slide 30s linear infinite;
      width: max-content;
    }

    .card-slider:hover {
      animation-play-state: paused;
    }

    @keyframes slide {
      0% {
        transform: translateX(0);
      }

      100% {
        transform: translateX(calc(-300px * 6));
      }
    }

    .slider-card {
      width: 300px;
      min-width: 300px;
      height: 400px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 2rem;
      transition: transform 0.3s ease;
      transform-style: preserve-3d;
      perspective: 1000px;
      cursor: pointer;
    }

    .slider-card:hover {
      transform: rotate3d(1, 1, 1, 15deg);
    }

    /* Section Styles */
    .section-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .section-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 2rem;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      perspective: 1000px;
    }

    .section-card:hover {
      transform: rotate3d(1, 1, 1, 10deg);
      border-color: var(--accent);
    }

    .section-card h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .section-card p {
      color: var(--muted);
      line-height: 1.6;
    }

    .section-card .icon {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--accent);
    }

    /* Tech Blog Section */
    .blog-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      perspective: 1000px;
    }

    .blog-card:hover {
      transform: rotate3d(1, 1, 1, 10deg);
      border-color: var(--accent);
    }

    .blog-card h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--text);
    }

    .blog-card .date {
      color: var(--muted);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .blog-card .tags {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .blog-card .tag {
      background: rgba(99, 102, 241, 0.1);
      color: var(--accent);
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
    }

    /* ML Research Section */
    .research-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      perspective: 1000px;
    }

    .research-card:hover {
      transform: rotate3d(1, 1, 1, 10deg);
      border-color: var(--accent);
    }

    .research-card .metrics {
      display: flex;
      gap: 2rem;
      margin-top: 1rem;
    }

    .research-card .metric {
      text-align: center;
    }

    .research-card .metric-value {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--accent);
    }

    .research-card .metric-label {
      font-size: 0.9rem;
      color: var(--muted);
    }

    /* Contact Section */
    .contact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .contact-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      perspective: 1000px;
    }

    .contact-card:hover {
      transform: rotate3d(1, 1, 1, 10deg);
      border-color: var(--accent);
    }

    .contact-card .icon {
      font-size: 2rem;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    .contact-card h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .contact-card p {
      color: var(--muted);
      font-size: 0.9rem;
    }

    /* Update button styles to ensure contrast */
    .cta button,
    .contact-form button,
    .mood-theme-modal-content #analyzeBtn {
      background: none;
      border: 1px solid var(--text);
      color: var(--text);
      padding: 0.8rem 1.5rem;
      font-weight: 300;
      cursor: pointer;
      transition: all 0.2s ease;
      border-radius: 4px;
      font-size: 0.9rem;
      letter-spacing: -0.2px;
    }

    .cta button:hover,
    .contact-form button:hover,
    .mood-theme-modal-content #analyzeBtn:hover {
      background: var(--text);
      color: var(--bg);
    }

    /* Update card styles to ensure contrast */
    .slider-card,
    .section-card,
    .blog-card,
    .research-card,
    .contact-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text);
    }

    /* Update modal styles */
    .mood-theme-modal-content {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
    }

    .mood-theme-modal-content h2.section-title {
      color: var(--text);
    }

    .mood-theme-modal-content p {
      color: var(--muted);
    }

    .mood-theme-modal-content #emotionInput {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text);
    }

    .mood-theme-modal-content #emotionInput::placeholder {
      color: var(--muted);
    }

    .mood-theme-modal-content .mode-toggle {
      border: 1px solid var(--card-border);
    }

    .mood-theme-modal-content .mode-toggle button {
      color: var(--muted);
    }

    .mood-theme-modal-content .mode-toggle button.active {
      background: var(--text);
      color: var(--bg);
    }

    .mood-theme-modal-content .mode-toggle button:hover:not(.active) {
      background: var(--hover-bg);
      color: var(--text);
    }

    .mood-theme-modal-content .mood-result {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text);
    }

    .mood-theme-modal-content .mood-result #moodText {
      color: var(--text);
    }

    .mood-theme-modal-content .mood-result #confidenceText {
      color: var(--muted);
    }

    /* Modern Mobile Navigation Icons */
    .mobile-nav-fabs .main-fab svg,
    .mobile-nav-fabs .section-fab svg {
      width: 22px;
      height: 22px;
      stroke: currentColor;
      stroke-width: 1.2;
      fill: none;
      transition: all 0.2s ease;
    }

    #moodThemeTrigger svg {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 1.2;
      fill: none;
      transition: all 0.2s ease;
    }

    /* Add hover effects for the icons */
    .mobile-nav-fabs .main-fab:hover svg,
    .mobile-nav-fabs .section-fab:hover svg,
    #moodThemeTrigger:hover svg {
      transform: scale(1.1);
      stroke-width: 1.5;
    }

    /* Add animation for the AI theme trigger */
    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      50% {
        transform: scale(1.05);
        opacity: 0.8;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    #moodThemeTrigger {
      animation: pulse 3s infinite;
    }

    #moodThemeTrigger:hover {
      animation: none;
    }

    /* AI Assistant Modal Styles */
    .mood-theme-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .mood-theme-modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .mood-theme-modal-content {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 2rem;
      width: 90%;
      max-width: 500px;
      position: relative;
      transform: translateY(20px);
      transition: transform 0.3s ease;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      border: 1px solid var(--card-border);
    }

    .mood-theme-modal-overlay.open .mood-theme-modal-content {
      transform: translateY(0);
    }

    .mood-theme-modal-content h2 {
      color: var(--text);
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
      background: linear-gradient(45deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .mood-theme-modal-content p {
      color: var(--muted);
      font-size: 0.95rem;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }

    .input-group {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .input-group input {
      flex: 1;
      padding: 0.8rem 1rem;
      border: 1px solid var(--card-border);
      border-radius: 8px;
      background: var(--bg);
      color: var(--text);
      font-size: 0.95rem;
      transition: all 0.2s ease;
    }

    .input-group input:focus {
      border-color: var(--accent);
      outline: none;
      box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.1);
    }

    .input-group button {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      background: var(--accent);
      color: white;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .input-group button:hover {
      background: var(--secondary);
      transform: translateY(-1px);
    }

    .theme-controls {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .mode-toggle {
      display: flex;
      gap: 0.5rem;
    }

    .mode-toggle button {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid var(--card-border);
      border-radius: 8px;
      background: var(--card-bg);
      color: var(--text);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .mode-toggle button:hover {
      background: var(--hover-bg);
    }

    .mode-toggle button.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    .theme-presets {
      display: flex;
      gap: 0.5rem;
    }

    .theme-presets button {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid var(--card-border);
      border-radius: 8px;
      background: var(--card-bg);
      color: var(--text);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .theme-presets button:hover {
      background: var(--hover-bg);
      border-color: var(--accent);
    }

    .mood-result {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: 12px;
      background: var(--hover-bg);
      border: 1px solid var(--card-border);
    }

    .mood-text {
      margin-bottom: 1rem;
      line-height: 1.5;
      color: var(--text);
    }

    .confidence-bar {
      height: 4px;
      background: var(--card-border);
      border-radius: 2px;
      margin: 1rem 0;
      overflow: hidden;
    }

    .confidence-fill {
      height: 100%;
      background: var(--accent);
      width: 0;
      transition: width 0.3s ease;
    }

    .confidence-text {
      font-size: 0.9rem;
      color: var(--muted);
      margin-top: 0.5rem;
    }

    .theme-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .action-button {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid var(--card-border);
      border-radius: 8px;
      background: var(--card-bg);
      color: var(--text);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .action-button:hover {
      background: var(--hover-bg);
      border-color: var(--accent);
    }

    .close-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 1.2rem;
      padding: 0.3rem;
      transition: color 0.2s ease;
      line-height: 1;
    }

    .close-button:hover {
      color: var(--text);
    }

    /* Theme Switch Button */
    .theme-switch {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 48px;
      height: 48px;
      border-radius: 24px;
      background: var(--accent);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      transition: all 0.2s ease;
      opacity: 0;
      transform: translateY(20px);
      z-index: 100;
    }

    .theme-switch.show {
      opacity: 1;
      transform: translateY(0);
    }

    .theme-switch:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .theme-switch i {
      font-size: 1.2rem;
    }

    /* Updated Section Styles */
    .section-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 4rem 2rem;
    }

    h2 {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 2rem;
      color: var(--text);
      text-transform: lowercase;
    }

    /* About Section */
    .about-content {
      display: grid;
      gap: 2rem;
    }

    .about-text p {
      font-size: 1.1rem;
      line-height: 1.6;
      color: var(--muted);
      margin-bottom: 2rem;
      text-transform: lowercase;
    }

    .tech-stack h3 {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--text);
      text-transform: lowercase;
    }

    .tech-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
    }

    .tech-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .tech-item:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
    }

    .tech-item i {
      color: var(--accent);
      font-size: 1.2rem;
    }

    .tech-item span {
      color: var(--text);
      font-size: 0.9rem;
      text-transform: lowercase;
    }

    /* Timeline Section */
    .timeline-container {
      position: relative;
      padding-left: 2rem;
    }

    .timeline-container::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--card-border);
    }

    .timeline-item {
      position: relative;
      margin-bottom: 3rem;
    }

    .timeline-dot {
      position: absolute;
      left: -2.5rem;
      width: 1rem;
      height: 1rem;
      background: var(--accent);
      border-radius: 50%;
      border: 2px solid var(--bg);
    }

    .timeline-content {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      padding: 1.5rem;
      transition: all 0.3s ease;
    }

    .timeline-content:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
    }

    .timeline-date {
      font-size: 0.9rem;
      color: var(--accent);
      margin-bottom: 0.5rem;
    }

    .timeline-content h3 {
      font-size: 1.2rem;
      color: var(--text);
      margin-bottom: 0.25rem;
      text-transform: lowercase;
    }

    .timeline-content h4 {
      font-size: 1rem;
      color: var(--muted);
      margin-bottom: 1rem;
      text-transform: lowercase;
    }

    .timeline-content p {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 1rem;
      text-transform: lowercase;
    }

    .timeline-tech {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .timeline-tech span {
      font-size: 0.8rem;
      color: var(--accent);
      background: rgba(var(--accent-rgb), 0.1);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      text-transform: lowercase;
    }

    /* Projects Section */
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .project-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
    }

    .project-content {
      padding: 1.5rem;
    }

    .project-card h3 {
      font-size: 1.2rem;
      color: var(--text);
      margin-bottom: 0.5rem;
      text-transform: lowercase;
    }

    .project-card p {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 1rem;
      text-transform: lowercase;
    }

    .project-tech {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    .project-tech span {
      font-size: 0.8rem;
      color: var(--accent);
      background: rgba(var(--accent-rgb), 0.1);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      text-transform: lowercase;
    }

    .project-links {
      display: flex;
      gap: 1rem;
    }

    .project-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text);
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .project-link:hover {
      color: var(--accent);
    }

    .project-link:hover .link-arrow {
      transform: translateX(4px);
    }

    @media (max-width: 768px) {
      .section-content {
        padding: 2rem 1rem;
      }

      .tech-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .timeline-container {
        padding-left: 1.5rem;
      }

      .timeline-dot {
        left: -1.75rem;
      }
    }

    /* Interactive Canvas Background - DISABLED for lazy elegance */
    #canvas-bg {
      display: none;
      /* Lazy: we don't need this */
    }

    /* Command Palette Styles */
    .cmd-palette-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      z-index: 2000;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 20vh;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
    }

    .cmd-palette-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .cmd-palette-content {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      width: 600px;
      max-width: 90%;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(16px);
      transform: scale(0.95);
      transition: transform 0.2s ease;
      overflow: hidden;
    }

    .cmd-palette-overlay.open .cmd-palette-content {
      transform: scale(1);
    }

    .cmd-header {
      display: flex;
      align-items: center;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--card-border);
    }

    .cmd-header i {
      color: var(--muted);
      margin-right: 1rem;
      font-size: 1.1rem;
    }

    .cmd-header input {
      background: none;
      border: none;
      color: var(--text);
      font-size: 1.1rem;
      flex: 1;
      font-family: 'Geist', sans-serif;
      outline: none;
    }

    .cmd-shortcut {
      background: var(--secondary);
      color: var(--muted);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    .cmd-results {
      max-height: 300px;
      overflow-y: auto;
      padding: 0.5rem;
    }

    .cmd-item {
      display: flex;
      align-items: center;
      padding: 0.8rem 1rem;
      cursor: pointer;
      border-radius: 6px;
      margin-bottom: 2px;
      transition: all 0.1s ease;
      color: var(--muted);
    }

    .cmd-item:hover,
    .cmd-item.selected {
      background: var(--hover-bg);
      color: var(--text);
    }

    .cmd-item.selected {
      background: rgba(59, 130, 246, 0.1);
      border-left: 2px solid var(--accent);
    }

    .cmd-item i {
      margin-right: 1rem;
      width: 20px;
      text-align: center;
    }

    .cmd-item-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cmd-item-title {
      font-size: 0.95rem;
      font-weight: 400;
    }

    .cmd-item-subtitle {
      font-size: 0.75rem;
      opacity: 0.6;
    }

    .cmd-footer {
      padding: 0.8rem 1.5rem;
      background: rgba(0, 0, 0, 0.2);
      border-top: 1px solid var(--card-border);
      display: flex;
      gap: 1.5rem;
      font-size: 0.75rem;
      color: var(--muted);
    }

    .cmd-footer kbd {
      background: var(--secondary);
      padding: 0.1rem 0.4rem;
      border-radius: 3px;
      font-family: inherit;
      margin-right: 0.3rem;
    }
  </style>
</head>

<body>
  <canvas id="canvas-bg"></canvas>
  <header>
    <h2>nirav sawant</h2>
    <nav>
      <a href="#projects">projects</a>
      <a href="#about">about me</a>
      <a href="#contact">reach out!</a>
      <a href="#ml-research">ml research</a>
      <a href="#tech-blog">my thoughts</a>
      <button id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme"
        style="background:none; border:none; color:var(--muted); cursor:pointer; font-size:0.8rem; padding:0.5rem; transition:all 0.3s; opacity:0.6;"
        onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">
        <i class="fas fa-circle-half-stroke" id="themeIcon"></i>
      </button>
    </nav>
  </header>



  <div class="mobile-nav-fabs">
    <button id="mainMobileNavFab" class="main-fab">
      <svg viewBox="0 0 24 24">
        <path d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
    <a href="#projects" class="section-fab" id="fabProjects">
      <svg viewBox="0 0 24 24">
        <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2z" />
        <path d="M3 7l4-4h10l4 4" />
      </svg>
    </a>
    <a href="#about" class="section-fab" id="fabAbout">
      <svg viewBox="0 0 24 24">
        <path d="M12 12a4 4 0 100-8 4 4 0 000 8z" />
        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
      </svg>
    </a>
    <a href="#ml-research" class="section-fab" id="fabMLResearch">
      <svg viewBox="0 0 24 24">
        <path
          d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" />
        <circle cx="12" cy="12" r="3" />
      </svg>
    </a>
    <a href="#contact" class="section-fab" id="fabContact">
      <svg viewBox="0 0 24 24">
        <path
          d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
      </svg>
    </a>
  </div>


  <!-- Simple theme toggle is in the header nav -->
  <!-- Command Palette Modal -->
  <div id="cmdPalette" class="cmd-palette-overlay">
    <div class="cmd-palette-content">
      <div class="cmd-header">
        <i class="fas fa-search"></i>
        <input type="text" id="cmdInput" placeholder="Type a command or search..." autocomplete="off">
        <span class="cmd-shortcut">ESC</span>
      </div>
      <div class="cmd-results" id="cmdResults">
        <!-- Results injected via JS -->
      </div>
      <div class="cmd-footer">
        <span><kbd>↑</kbd> <kbd>↓</kbd> to navigate</span>
        <span><kbd>↵</kbd> to select</span>
      </div>
    </div>
  </div>

  <section class="hero">
    <div class="hero-content">
      <div class="hero-text">
        <div class="hero-greeting"
          style="opacity:0.7; font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase;">Building the Future
        </div>
        <h1>Safety Layers for <br>Autonomous Intelligence.</h1>
        <p class="hero-subtitle">Robotics • AI • Safety Critical Systems</p>
        <div class="hero-description">
          <p>building high-assurance software for the next generation of robotics. currently architecting safety layers
            for autonomous agents and contributing to the future of open-source driving.</p>
        </div>
        <div class="hero-links">
          <a href="#projects" class="hero-link">
            <span class="link-text">view projects</span>
            <span class="link-arrow">→</span>
          </a>
          <a href="#contact" class="hero-link">
            <span class="link-text">say hello</span>
            <span class="link-arrow">→</span>
          </a>
        </div>
      </div>
      <div class="hero-visual">
        <div class="code-block">
          <pre><code>class Developer {
  constructor() {
    this.name = "nirav";
    this.role = "student";
    this.skills = [
      "full-stack",
      "ai/ml",
      "robotics"
    ];
  }
}</code></pre>
        </div>
      </div>
    </div>
  </section>

  <section id="about" class="about">
    <div class="section-content">
      <h2>about me</h2>
      <div class="about-content">
        <div class="about-text">
          <p>hey there! i'm a mechatronics engineering student who loves building cool stuff. when i'm not coding or
            tinkering with circuits, you'll find me exploring new technologies and working on personal projects.</p>
          <div class="tech-stack">
            <h3>tech stack</h3>
            <div class="tech-grid">
              <div class="tech-item">
                <i class="fab fa-python"></i>
                <span>python</span>
              </div>
              <div class="tech-item">
                <i class="fab fa-js"></i>
                <span>javascript</span>
              </div>
              <div class="tech-item">
                <i class="fab fa-react"></i>
                <span>react</span>
              </div>
              <div class="tech-item">
                <i class="fab fa-node-js"></i>
                <span>node.js</span>
              </div>
              <div class="tech-item">
                <i class="fas fa-microchip"></i>
                <span>arduino</span>
              </div>
              <div class="tech-item">
                <i class="fas fa-robot"></i>
                <span>ros</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="timeline" class="timeline">
    <div class="section-content">
      <h2>experience</h2>
      <div class="timeline-container">
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">
            <div class="timeline-date">June 2024 - August 2024</div>
            <h3>junior AI content strategist</h3>
            <h4>legacy+</h4>
            <p>championed communication with marketing/analyst teams <br>
              created ai tools to streamline development of educational content for partnering organizations</p>
            <div class="timeline-tech">
              <span>react</span>
              <span>node.js</span>
              <span>aws</span>
            </div>
          </div>
        </div>
      </div>
      <div class="timeline-container">
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">
            <div class="timeline-date">May 2025 - August 2025</div>
            <h3>software engineer intern</h3>
            <h4>cibc</h4>
            <p>Championed concept of SDLC <br>
              Contributed to multiple production level projects within the bank <br>
              Championed communication with analyst teams, and gained a thorough understanding of the commercial banking
              industry

            </p>
            <div class="timeline-tech">
              <span>react</span>
              <span>node.js</span>
              <span>aws</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="projects" class="projects">
    <div class="section-content">
      <h2>projects</h2>


      <div class="projects-grid">
        <div class="project-card">
          <div class="project-content">
            <h3>Flowguard</h3>
            <p>A robust, independent safety supervisor for robotics. Intercepts and negates unsafe actions in real-time
              using a modular policy engine. Ensures ISO-compliant operation for autonomous systems.</p>
            <div class="project-tech">
              <span>Python</span>
              <span>FastAPI</span>
              <span>Robotics</span>
              <span>Safety Critical</span>
            </div>
            <div class="project-links">
              <a href="#" class="project-link">
                <span>view architecture</span>
                <span class="link-arrow">→</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Add more project cards as needed -->
      </div>

      <div class="projects-grid">
        <div class="project-card">
          <div class="project-content">
            <h3>Autoware Contribution</h3>
            <p>Contributing to the world's leading open-source software for autonomous driving. Debugged and enhanced
              the `autoware_shadow_recorder` to improve data replay and simulation fidelity.</p>
            <div class="project-tech">
              <span>C++</span>
              <span>ROS 2</span>
              <span>Autoware</span>
              <span>Open Source</span>
            </div>
            <div class="project-links">
              <a href="https://github.com/autowarefoundation/autoware" target="_blank" class="project-link">
                <span>view contribution</span>
                <span class="link-arrow">→</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Add more project cards as needed -->
      </div>



      <div class="projects-grid">
        <div class="project-card">
          <div class="project-content">
            <img src="Screenshot 2025-06-20 095438.png" alt="PromptGen AI Screenshot"
              style="display:block;max-width:220px;height:auto;margin:0 auto 1rem auto;border-radius:8px;object-fit:cover;box-shadow:0 2px 8px rgba(0,0,0,0.08);" />
            <h3>promptgen ai</h3>
            <p>A browser extension that helps users communicate ideas to AI models by condensing their intent into 4 key
              words, which are then expanded into a detailed prompt for use in any AI system.</p>
            <div class="project-tech">
              <span>javascript</span>
              <span>chrome extension</span>
              <span>openai</span>
            </div>
            <div class="project-links">
              <a href="#" class="project-link">
                <span>view code</span>
                <span class="link-arrow">→</span>
              </a>
              <a href="#" class="project-link">
                <span>live demo</span>
                <span class="link-arrow">→</span>
              </a>
            </div>
          </div>
        </div>
        <!-- Add more project cards as needed -->
      </div>
    </div>
  </section>

  <section id="contact">
    <h2 class="section-title">Contact Me</h2>
    <div class="contact-form">
      <form action="#">
        <input type="text" placeholder="Your Name" required>
        <input type="email" placeholder="Your Email" required>
        <textarea placeholder="Your Message" rows="6" required></textarea>
        <button type="submit">Send Message</button>
      </form>
    </div>
  </section>

  <section id="ml-research">
    <h2 class="section-title">ML Research</h2>
    <div class="section-grid">
      <div class="research-card">
        <h3>Quantum ML</h3>
        <p>Exploring quantum computing applications in machine learning and optimization problems.</p>
        <div class="metrics">
          <div class="metric">
            <div class="metric-value">3x</div>
            <div class="metric-label">Speedup</div>
          </div>
          <div class="metric">
            <div class="metric-value">99%</div>
            <div class="metric-label">Reliability</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="tech-blog">
    <h2 class="section-title">my thoughts</h2>
    <div class="section-grid">
      <div class="blog-card">
        <h3>Why Open-Source AI is Gaining Momentum.</h3>
        <div class="date">March 15, 2024</div>
        <p>Exploring best practices for deploying and scaling machine learning models in production environments.</p>
        <div class="tags">
          <span class="tag">AI</span>
          <span class="tag">MLOps</span>
          <span class="tag">DevOps</span>
        </div>
      </div>
      <div class="blog-card">
        <h3>Modern Web Architecture</h3>
        <div class="date">March 10, 2024</div>
        <p>Deep dive into building resilient and performant web applications using modern frameworks and tools.</p>
        <div class="tags">
          <span class="tag">Web Dev</span>
          <span class="tag">Architecture</span>
          <span class="tag">Performance</span>
        </div>
      </div>
      <div class="blog-card">
        <h3>Cloud Native Development</h3>
        <div class="date">March 5, 2024</div>
        <p>Understanding the principles and practices of building applications for the cloud era.</p>
        <div class="tags">
          <span class="tag">Cloud</span>
          <span class="tag">DevOps</span>
          <span class="tag">Kubernetes</span>
        </div>
      </div>
    </div>
  </section>

  <section id="contact">
    <h2 class="section-title">Reach Out</h2>
    <div class="contact-grid">
      <div class="contact-card">
        <i class="fas fa-envelope icon"></i>
        <h3>Email</h3>
        <p> please feel free to reach out to talk about your projects!</p>
        <a href="mailto: nirav.sawant22@gmail.com"
          style="color: var(--accent); text-decoration: none;">your.email@example.com</a>
      </div>
      <div class="contact-card">
        <i class="fab fa-linkedin icon"></i>
        <h3>LinkedIn</h3>
        <p>let's connect!</p>
        <a href="https://www.linkedin.com/in/nirav-sawant-11b739300/" target="_blank"
          style="color: var(--accent); text-decoration: none;">linkedin.com/in/yourprofile</a>
      </div>
      <div class="contact-card">
        <i class="fab fa-github icon"></i>
        <h3>GitHub</h3>
        <p>Check out my code</p>
        <a href="https://github.com/NiravTech22" target="_blank"
          style="color: var(--accent); text-decoration: none;">github.com/yourusername</a>
      </div>
    </div>
  </section>

  <footer>
    <div class="social-links">
      <a href="https://github.com/NiravTech22" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
      <a href="https://www.youtube.com/@niravsawant22" target="_blank" aria-label="YouTube"><i
          class="fab fa-youtube"></i></a>
      <a href="https://www.linkedin.com/in/nirav-sawant-11b739300/" target="_blank" aria-label="LinkedIn"><i
          class="fab fa-linkedin"></i></a>
    </div>
    <p>© 2025 Nirav Sawant. Made with curiosity and caffeine.</p>
  </footer>

  <script>
    // Free sentiment analysis using a lightweight rule-based approach
    class MoodAnalyzer {
      constructor() {
        this.emotionWords = {
          happy: {
            words: ['happy', 'joy', 'excited', 'thrilled', 'amazing', 'awesome', 'fantastic', 'great', 'wonderful', 'brilliant', 'perfect', 'excellent', 'delighted', 'cheerful', 'elated', 'ecstatic', 'blissful', 'content', 'satisfied', 'pleased', 'glad', 'merry', 'upbeat', 'optimistic', 'enthusiastic'],
            weight: 1
          },
          sad: {
            words: ['sad', 'depressed', 'down', 'blue', 'melancholy', 'gloomy', 'dejected', 'despondent', 'miserable', 'sorrowful', 'mournful', 'grieving', 'heartbroken', 'disappointed', 'discouraged', 'hopeless', 'lonely', 'isolated', 'empty', 'hollow', 'hurt', 'pain', 'ache', 'crying', 'tears'],
            weight: 1
          },
          angry: {
            words: ['angry', 'mad', 'furious', 'rage', 'irritated', 'annoyed', 'frustrated', 'pissed', 'livid', 'outraged', 'infuriated', 'aggravated', 'hostile', 'resentful', 'bitter', 'indignant', 'incensed', 'irate', 'enraged', 'seething', 'fuming', 'steaming', 'boiling', 'heated'],
            weight: 1
          },
          anxious: {
            words: ['anxious', 'nervous', 'worried', 'stressed', 'tense', 'uneasy', 'apprehensive', 'concerned', 'troubled', 'restless', 'agitated', 'jittery', 'panicked', 'overwhelmed', 'frantic', 'distressed', 'fearful', 'scared', 'afraid', 'terrified', 'petrified', 'alarmed', 'startled', 'rattled'],
            weight: 1
          },
          calm: {
            words: ['calm', 'peaceful', 'relaxed', 'serene', 'tranquil', 'zen', 'centered', 'balanced', 'composed', 'collected', 'cool', 'mellow', 'laid-back', 'easygoing', 'chilled', 'comfortable', 'at ease', 'stable', 'steady', 'grounded', 'mindful', 'meditative'],
            weight: 1
          },
          energetic: {
            words: ['energetic', 'pumped', 'hyper', 'vibrant', 'dynamic', 'lively', 'spirited', 'vigorous', 'active', 'animated', 'bouncy', 'zippy', 'peppy', 'bubbly', 'effervescent', 'charged', 'electric', 'motivated', 'driven', 'ambitious', 'determined'],
            weight: 1
          },
          excited: {
            words: ['excited', 'thrilled', 'pumped', 'stoked', 'hyped', 'ecstatic', 'elated', 'overjoyed', 'euphoric', 'jubilant', 'exhilarated', 'enthusiastic', 'passionate', 'fired up', 'amped', 'buzzed', 'psyched', 'stoked', 'wired', 'charged up'],
            weight: 1
          },
          peaceful: {
            words: ['peaceful', 'serene', 'tranquil', 'quiet', 'gentle', 'soft', 'mild', 'soothing', 'calming', 'restful', 'harmonious', 'balanced', 'centered', 'grounded', 'stable', 'steady', 'composed', 'collected', 'mindful', 'present'],
            weight: 1
          },
          focused: {
            words: ['focused', 'concentrated', 'attentive', 'alert', 'sharp', 'clear', 'precise', 'determined', 'resolute', 'single-minded', 'dedicated', 'committed', 'disciplined', 'organized', 'systematic', 'methodical', 'analytical', 'logical', 'rational'],
            weight: 1
          },
          playful: {
            words: ['playful', 'fun', 'silly', 'goofy', 'whimsical', 'lighthearted', 'cheerful', 'merry', 'jovial', 'amusing', 'entertaining', 'delightful', 'charming', 'cute', 'adorable', 'sweet', 'lovely', 'pleasant', 'enjoyable', 'entertaining'],
            weight: 1
          }
        };

        this.negativeWords = ['not', 'no', 'never', 'without', 'barely', 'hardly', 'scarcely', 'little', 'less', 'least'];
        this.intensifiers = ['very', 'really', 'extremely', 'incredibly', 'absolutely', 'totally', 'completely', 'utterly', 'quite', 'rather', 'pretty', 'so', 'too'];
      }

      analyzeMood(text) {
        const words = text.toLowerCase().replace(/[^\w\s]/g, '').split(/\s+/);
        const scores = {};
        let totalMatches = 0;

        // Initialize scores
        Object.keys(this.emotionWords).forEach(emotion => {
          scores[emotion] = 0;
        });

        // Analyze each word with context
        for (let i = 0; i < words.length; i++) {
          const word = words[i];
          const prevWord = i > 0 ? words[i - 1] : '';

          // Check for emotion words
          Object.entries(this.emotionWords).forEach(([emotion, data]) => {
            if (data.words.includes(word)) {
              let score = data.weight;

              // Apply modifiers
              if (this.intensifiers.includes(prevWord)) {
                score *= 1.5;
              }
              if (this.negativeWords.includes(prevWord)) {
                score *= -0.8; // Negative modifier
              }

              scores[emotion] += score;
              totalMatches++;
            }
          });
        }

        // Find dominant emotion
        let dominantEmotion = 'neutral';
        let maxScore = 0;

        Object.entries(scores).forEach(([emotion, score]) => {
          // Normalize scores by ensuring non-negative values for mood detection
          const normalizedScore = Math.max(0, score);
          if (normalizedScore > maxScore) {
            maxScore = normalizedScore;
            dominantEmotion = emotion;
          }
        });

        let confidence = 0;
        // Calculate confidence based on matches and text length
        if (totalMatches > 0) {
          // Base confidence from the proportion of emotion words
          confidence = totalMatches / words.length;
          // Add a boost based on the max score achieved for the dominant emotion
          confidence += (maxScore / totalMatches) * 0.3; // Give more weight to higher scores
          confidence = Math.min(0.95, confidence); // Cap at 95%
        } else if (words.length > 0) {
          // If no emotion words, but text exists, confidence is low for neutral
          confidence = 0.1;
        }

        // Handle special cases for better accuracy
        if (text.includes('!') && (dominantEmotion === 'happy' || dominantEmotion === 'energetic')) {
          confidence = Math.min(0.95, confidence * 1.1); // Small boost for exclamation marks
        }
        if (text.includes('...') && dominantEmotion === 'sad') {
          confidence = Math.min(0.95, confidence * 1.1); // Small boost for ellipses
        }

        return {
          mood: dominantEmotion,
          confidence: Math.max(0.1, Math.min(0.95, confidence)), // Ensure confidence is between 10% and 95%
          scores: scores,
          details: {
            wordCount: words.length,
            emotionMatches: totalMatches
          }
        };
      }
    }

    const moodAnalyzer = new MoodAnalyzer();

    // Define themes first
    const themes = {
      happy: {
        name: "Sunshine",
        light: {
          '--bg': '#fffbf0',
          '--text': '#2d1810',
          '--accent': '#f57c00',
          '--secondary': '#ff9800',
          '--muted': '#8d6e63',
          '--card-bg': '#ffffff',
          '--card-border': '#ffe0b2',
          '--hover-bg': '#fff8e1'
        },
        dark: {
          '--bg': '#1a1611',
          '--text': '#fff8e1',
          '--accent': '#ffb74d',
          '--secondary': '#ffa726',
          '--muted': '#bcaaa4',
          '--card-bg': '#2d2418',
          '--card-border': '#4d4033',
          '--hover-bg': '#3d3228'
        }
      },
      sad: {
        name: "Melancholy",
        light: {
          '--bg': '#f3f8ff',
          '--text': '#1a237e',
          '--accent': '#1976d2',
          '--secondary': '#1565c0',
          '--muted': '#5c6bc0',
          '--card-bg': '#ffffff',
          '--card-border': '#bbdefb',
          '--hover-bg': '#e3f2fd'
        },
        dark: {
          '--bg': '#0d1421',
          '--text': '#bbdefb',
          '--accent': '#42a5f5',
          '--secondary': '#2196f3',
          '--muted': '#7986cb',
          '--card-bg': '#162938',
          '--card-border': '#1e3a4f',
          '--hover-bg': '#2a4a6a'
        }
      },
      angry: {
        name: "Intense",
        light: {
          '--bg': '#ffebee',
          '--text': '#b71c1c',
          '--accent': '#d32f2f',
          '--secondary': '#f44336',
          '--muted': '#ad1457',
          '--card-bg': '#ffffff',
          '--card-border': '#ffcdd2',
          '--hover-bg': '#fce4ec'
        },
        dark: {
          '--bg': '#1f0c0c',
          '--text': '#ffcdd2',
          '--accent': '#ef5350',
          '--secondary': '#f44336',
          '--muted': '#e57373',
          '--card-bg': '#3d1a1a',
          '--card-border': '#4d2a2a',
          '--hover-bg': '#5d3a3a'
        }
      },
      anxious: {
        name: "Storm",
        light: {
          '--bg': '#f3e5f5',
          '--text': '#4a148c',
          '--accent': '#7b1fa2',
          '--secondary': '#8e24aa',
          '--muted': '#6a1b9a',
          '--card-bg': '#ffffff',
          '--card-border': '#e1bee7',
          '--hover-bg': '#fce4ec'
        },
        dark: {
          '--bg': '#1a0d1f',
          '--text': '#e1bee7',
          '--accent': '#ab47bc',
          '--secondary': '#9c27b0',
          '--muted': '#ba68c8',
          '--card-bg': '#2d1b35',
          '--card-border': '#3d2a45',
          '--hover-bg': '#4d3a55'
        }
      },
      calm: {
        name: "Zen",
        light: {
          '--bg': '#f1f8e9',
          '--text': '#1b5e20',
          '--accent': '#388e3c',
          '--secondary': '#4caf50',
          '--muted': '#2e7d32',
          '--card-bg': '#ffffff',
          '--card-border': '#c8e6c9',
          '--hover-bg': '#e8f5e8'
        },
        dark: {
          '--bg': '#0d1f0f',
          '--text': '#c8e6c9',
          '--accent': '#66bb6a',
          '--secondary': '#4caf50',
          '--muted': '#81c784',
          '--card-bg': '#1b3820',
          '--card-border': '#2a4a2a',
          '--hover-bg': '#3a5a3a'
        }
      },
      energetic: {
        name: "Electric",
        light: {
          '--bg': '#fff3e0',
          '--text': '#e65100',
          '--accent': '#ff6f00',
          '--secondary': '#ff8f00',
          '--muted': '#f57c00',
          '--card-bg': '#ffffff',
          '--card-border': '#ffe0b2',
          '--hover-bg': '#fff8e1'
        },
        dark: {
          '--bg': '#0a0a0a',
          '--text': '#ffffff',
          '--accent': '#ff4081',
          '--secondary': '#00e5ff',
          '--muted': '#b388ff',
          '--card-bg': '#1a0d33',
          '--card-border': '#2a1d43',
          '--hover-bg': '#3a2d53'
        }
      },
      neutral: {
        name: "Subtle Cyber",
        light: {
          '--bg': '#f0f0f5',
          '--text': '#333333',
          '--accent': '#2196f3',
          '--secondary': '#4caf50',
          '--muted': '#777777',
          '--card-bg': '#ffffff',
          '--card-border': '#e0e0e0',
          '--hover-bg': '#f5f5f5'
        },
        dark: {
          '--bg': '#0f0f12',
          '--text': '#e0e0e0',
          '--accent': '#00bcd4',
          '--secondary': '#8bc34a',
          '--muted': '#888888',
          '--card-bg': '#1a1a1f',
          '--card-border': '#2a2a2f',
          '--hover-bg': '#2a2a2f'
        }
      },
      excited: {
        name: "Vibrant",
        light: {
          '--bg': '#fff8e1',
          '--text': '#e65100',
          '--accent': '#ff6f00',
          '--secondary': '#ff8f00',
          '--muted': '#f57c00',
          '--card-bg': '#ffffff',
          '--card-border': '#ffe0b2',
          '--hover-bg': '#fff3e0'
        },
        dark: {
          '--bg': '#1a0d0f',
          '--text': '#ffeb3b',
          '--accent': '#ff9800',
          '--secondary': '#ffc107',
          '--muted': '#ffb74d',
          '--card-bg': '#2d1a1f',
          '--card-border': '#4d2a2f',
          '--hover-bg': '#3d3a3f'
        }
      },
      peaceful: {
        name: "Serenity",
        light: {
          '--bg': '#e8f5e8',
          '--text': '#2e7d32',
          '--accent': '#4caf50',
          '--secondary': '#66bb6a',
          '--muted': '#388e3c',
          '--card-bg': '#ffffff',
          '--card-border': '#c8e6c9',
          '--hover-bg': '#f1f8e9'
        },
        dark: {
          '--bg': '#0d1f0f',
          '--text': '#a5d6a7',
          '--accent': '#66bb6a',
          '--secondary': '#4caf50',
          '--muted': '#81c784',
          '--card-bg': '#1b3820',
          '--card-border': '#2a4a2a',
          '--hover-bg': '#2a5a2a'
        }
      },
      focused: {
        name: "Deep Focus",
        light: {
          '--bg': '#f5f5f5',
          '--text': '#212121',
          '--accent': '#1976d2',
          '--secondary': '#2196f3',
          '--muted': '#757575',
          '--card-bg': '#ffffff',
          '--card-border': '#e0e0e0',
          '--hover-bg': '#fafafa'
        },
        dark: {
          '--bg': '#0a0a0a',
          '--text': '#e0e0e0',
          '--accent': '#42a5f5',
          '--secondary': '#2196f3',
          '--muted': '#9e9e9e',
          '--card-bg': '#1a1a1a',
          '--card-border': '#2a2a2a',
          '--hover-bg': '#2a2a2a'
        }
      },
      playful: {
        name: "Playful",
        light: {
          '--bg': '#fce4ec',
          '--text': '#c2185b',
          '--accent': '#e91e63',
          '--secondary': '#f06292',
          '--muted': '#ad1457',
          '--card-bg': '#ffffff',
          '--card-border': '#f8bbd9',
          '--hover-bg': '#f3e5f5'
        },
        dark: {
          '--bg': '#1a0d1f',
          '--text': '#f8bbd9',
          '--accent': '#e91e63',
          '--secondary': '#f06292',
          '--muted': '#ba68c8',
          '--card-bg': '#2d1b35',
          '--card-border': '#3d2a45',
          '--hover-bg': '#4d3a55'
        }
      }
    };

    // Define preset themes
    const presetThemes = {
      focus: {
        name: "Focus Mode",
        light: {
          '--bg': '#f8f9fa',
          '--text': '#2d3436',
          '--accent': '#0984e3',
          '--secondary': '#74b9ff',
          '--muted': '#dfe6e9',
          '--card-bg': '#ffffff',
          '--card-border': '#dfe6e9',
          '--hover-bg': '#f1f2f6'
        },
        dark: {
          '--bg': '#2d3436',
          '--text': '#f5f6fa',
          '--accent': '#0984e3',
          '--secondary': '#74b9ff',
          '--muted': '#636e72',
          '--card-bg': '#353b48',
          '--card-border': '#636e72',
          '--hover-bg': '#2f3640'
        }
      },
      relax: {
        name: "Relax Mode",
        light: {
          '--bg': '#f1f8e9',
          '--text': '#1b5e20',
          '--accent': '#388e3c',
          '--secondary': '#4caf50',
          '--muted': '#2e7d32',
          '--card-bg': '#ffffff',
          '--card-border': '#c8e6c9',
          '--hover-bg': '#e8f5e8'
        },
        dark: {
          '--bg': '#0d1f0f',
          '--text': '#c8e6c9',
          '--accent': '#66bb6a',
          '--secondary': '#4caf50',
          '--muted': '#81c784',
          '--card-bg': '#1b3820',
          '--card-border': '#2a4a2a',
          '--hover-bg': '#3a5a3a'
        }
      },
      creative: {
        name: "Creative Mode",
        light: {
          '--bg': '#fff3e0',
          '--text': '#e65100',
          '--accent': '#ff6f00',
          '--secondary': '#ff8f00',
          '--muted': '#f57c00',
          '--card-bg': '#ffffff',
          '--card-border': '#ffe0b2',
          '--hover-bg': '#fff8e1'
        },
        dark: {
          '--bg': '#1a0d1f',
          '--text': '#e1bee7',
          '--accent': '#ab47bc',
          '--secondary': '#9c27b0',
          '--muted': '#ba68c8',
          '--card-bg': '#2d1b35',
          '--card-border': '#3d2a45',
          '--hover-bg': '#4d3a55'
        }
      },
      sunset: {
        name: "Sunset Mode",
        light: {
          '--bg': '#fff8e1',
          '--text': '#e65100',
          '--accent': '#ff6f00',
          '--secondary': '#ff8f00',
          '--muted': '#f57c00',
          '--card-bg': '#ffffff',
          '--card-border': '#ffe0b2',
          '--hover-bg': '#fff3e0'
        },
        dark: {
          '--bg': '#1a0d0f',
          '--text': '#ffeb3b',
          '--accent': '#ff9800',
          '--secondary': '#ffc107',
          '--muted': '#ffb74d',
          '--card-bg': '#2d1a1f',
          '--card-border': '#4d2a2f',
          '--hover-bg': '#3d3a3f'
        }
      },
      ocean: {
        name: "Ocean Mode",
        light: {
          '--bg': '#e3f2fd',
          '--text': '#1565c0',
          '--accent': '#1976d2',
          '--secondary': '#2196f3',
          '--muted': '#42a5f5',
          '--card-bg': '#ffffff',
          '--card-border': '#bbdefb',
          '--hover-bg': '#f3e5f5'
        },
        dark: {
          '--bg': '#0d1421',
          '--text': '#bbdefb',
          '--accent': '#42a5f5',
          '--secondary': '#2196f3',
          '--muted': '#7986cb',
          '--card-bg': '#162938',
          '--card-border': '#1e3a4f',
          '--hover-bg': '#2a4a6a'
        }
      },
      forest: {
        name: "Forest Mode",
        light: {
          '--bg': '#e8f5e8',
          '--text': '#2e7d32',
          '--accent': '#4caf50',
          '--secondary': '#66bb6a',
          '--muted': '#388e3c',
          '--card-bg': '#ffffff',
          '--card-border': '#c8e6c9',
          '--hover-bg': '#f1f8e9'
        },
        dark: {
          '--bg': '#0d1f0f',
          '--text': '#a5d6a7',
          '--accent': '#66bb6a',
          '--secondary': '#4caf50',
          '--muted': '#81c784',
          '--card-bg': '#1b3820',
          '--card-border': '#2a4a2a',
          '--hover-bg': '#2a5a2a'
        }
      }
    };

    // User tracking and theme rotation system
    class ThemeManager {
      constructor() {
        this.userId = this.getOrCreateUserId();
        this.usedThemes = this.getUsedThemes();
        this.themeRotation = this.initializeThemeRotation();
      }

      // Generate or retrieve unique user ID
      getOrCreateUserId() {
        let userId = localStorage.getItem('themeUserId');
        if (!userId) {
          userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
          localStorage.setItem('themeUserId', userId);
        }
        return userId;
      }

      // Get list of themes used by this user
      getUsedThemes() {
        const used = localStorage.getItem(`usedThemes_${this.userId}`);
        return used ? JSON.parse(used) : [];
      }

      // Save used theme to user's history
      saveUsedTheme(themeName, moodType) {
        const themeRecord = {
          name: themeName,
          moodType: moodType,
          timestamp: Date.now()
        };

        this.usedThemes.push(themeRecord);

        // Keep only last 20 themes to prevent localStorage bloat
        if (this.usedThemes.length > 20) {
          this.usedThemes = this.usedThemes.slice(-20);
        }

        localStorage.setItem(`usedThemes_${this.userId}`, JSON.stringify(this.usedThemes));
      }

      // Initialize theme rotation with all available themes
      initializeThemeRotation() {
        const allThemes = Object.keys(themes).filter(key => key !== 'neutral');
        const presetThemeKeys = Object.keys(presetThemes);

        return {
          moodThemes: [...allThemes],
          presetThemes: [...presetThemeKeys],
          lastMoodTheme: null,
          lastPresetTheme: null
        };
      }

      // Get next available theme that hasn't been used recently
      getNextTheme(moodType, themeCategory = 'mood') {
        if (themeCategory === 'mood') {
          return this.getNextMoodTheme(moodType);
        } else {
          return this.getNextPresetTheme();
        }
      }

      // Get next mood theme with rotation logic
      getNextMoodTheme(moodType) {
        const availableThemes = this.themeRotation.moodThemes.filter(theme =>
          theme !== this.themeRotation.lastMoodTheme
        );

        // If we've used all themes, reset rotation
        if (availableThemes.length === 0) {
          this.themeRotation.moodThemes = Object.keys(themes).filter(key => key !== 'neutral');
          availableThemes.push(...this.themeRotation.moodThemes);
        }

        // Prefer themes that haven't been used recently
        const recentlyUsed = this.usedThemes
          .filter(record => record.timestamp > Date.now() - 24 * 60 * 60 * 1000) // Last 24 hours
          .map(record => record.name);

        const unusedThemes = availableThemes.filter(theme =>
          !recentlyUsed.includes(themes[theme].name)
        );

        // If we have unused themes, use one of those
        if (unusedThemes.length > 0) {
          const selectedTheme = unusedThemes[Math.floor(Math.random() * unusedThemes.length)];
          this.themeRotation.lastMoodTheme = selectedTheme;
          return selectedTheme;
        }

        // Otherwise, use any available theme
        const selectedTheme = availableThemes[Math.floor(Math.random() * availableThemes.length)];
        this.themeRotation.lastMoodTheme = selectedTheme;
        return selectedTheme;
      }

      // Get next preset theme with rotation logic
      getNextPresetTheme() {
        const availableThemes = this.themeRotation.presetThemes.filter(theme =>
          theme !== this.themeRotation.lastPresetTheme
        );

        if (availableThemes.length === 0) {
          this.themeRotation.presetThemes = Object.keys(presetThemes);
          availableThemes.push(...this.themeRotation.presetThemes);
        }

        const recentlyUsed = this.usedThemes
          .filter(record => record.timestamp > Date.now() - 24 * 60 * 60 * 1000)
          .map(record => record.name);

        const unusedThemes = availableThemes.filter(theme =>
          !recentlyUsed.includes(presetThemes[theme].name)
        );

        if (unusedThemes.length > 0) {
          const selectedTheme = unusedThemes[Math.floor(Math.random() * unusedThemes.length)];
          this.themeRotation.lastPresetTheme = selectedTheme;
          return selectedTheme;
        }

        const selectedTheme = availableThemes[Math.floor(Math.random() * availableThemes.length)];
        this.themeRotation.lastPresetTheme = selectedTheme;
        return selectedTheme;
      }

      // Get theme usage statistics
      getThemeStats() {
        const stats = {};
        this.usedThemes.forEach(record => {
          if (!stats[record.name]) {
            stats[record.name] = 0;
          }
          stats[record.name]++;
        });
        return stats;
      }
    }

    // Initialize theme manager
    const themeManager = new ThemeManager();

    let currentThemeMode = 'dark'; // Initialize with 'dark' as per your request

    /**
     * Sets the active theme mode (light or dark) and applies the current mood's colors.
     * @param {string} mode - 'light' or 'dark'
     */
    function setThemeMode(mode) {
      currentThemeMode = mode;
      const lightButton = document.getElementById('lightMode');
      const darkButton = document.getElementById('darkMode');

      if (lightButton && darkButton) { // Ensure buttons exist
        if (mode === 'light') {
          lightButton.classList.add('active');
          darkButton.classList.remove('active');
        } else {
          lightButton.classList.remove('active');
          darkButton.classList.add('active');
        }
      }

      // Re-apply the current detected mood's theme but with the new mode
      const emotionInput = document.getElementById('emotionInput');
      const input = emotionInput ? emotionInput.value.trim() : ''; // Safely access value

      if (input) { // If there's an active emotion, re-analyze and apply
        setThemeFromEmotion();
      } else { // Otherwise, apply neutral theme in the selected mode
        applyTheme(themes.neutral[currentThemeMode]);
      }
    }

    /**
     * Analyzes the emotion input and applies the corresponding theme.
     */
    async function setThemeFromEmotion() {
      const inputElement = document.getElementById('emotionInput');
      const input = inputElement ? inputElement.value.trim() : '';
      const button = document.getElementById('analyzeBtn');
      const result = document.getElementById('result');

      if (!input) {
        // If input is empty, revert to neutral theme for current mode
        applyTheme(themes.neutral[currentThemeMode]);
        const moodText = document.getElementById('moodText');
        if (moodText) {
          moodText.textContent = 'please tell me how you\'re feeling to set your preferred theme.';
        }
        if (result) result.style.display = 'block';
        if (button) {
          button.disabled = false;
          button.textContent = 'change your theme';
        }
        const confidenceFill = document.getElementById('confidenceFill');
        const confidenceText = document.getElementById('confidenceText');
        if (confidenceFill) confidenceFill.style.width = '0%';
        if (confidenceText) confidenceText.textContent = '';
        return;
      }

      // Show loading state
      if (button) {
        button.disabled = true;
        button.textContent = 'Analyzing...';
      }
      if (result) result.style.display = 'none';

      // Simulate processing time for better UX
      await new Promise(resolve => setTimeout(resolve, 1000));

      try {
        const analysis = moodAnalyzer.analyzeMood(input);

        // For now, use direct theme selection to get basic functionality working
        const selectedThemeKey = analysis.mood;
        const themeToApply = themes[selectedThemeKey] ? themes[selectedThemeKey][currentThemeMode] : themes.neutral[currentThemeMode];

        // Display results
        if (result) result.style.display = 'block';
        const moodText = document.getElementById('moodText');
        if (moodText) {
          moodText.innerHTML = `
              <strong>Detected Mood:</strong> ${analysis.mood.charAt(0).toUpperCase() + analysis.mood.slice(1)} 
              <span style="color: var(--secondary);">(${themes[selectedThemeKey] ? themes[selectedThemeKey].name : 'Neutral'})</span>
            `;
        }

        // Animate confidence bar
        const confidenceFill = document.getElementById('confidenceFill');
        const confidenceText = document.getElementById('confidenceText');

        if (confidenceFill) {
          // Reset width before setting for animation effect
          confidenceFill.style.width = '0%';
          setTimeout(() => {
            confidenceFill.style.width = `${analysis.confidence * 100}%`;
          }, 100);
        }
        if (confidenceText) {
          confidenceText.textContent = `Confidence: ${Math.round(analysis.confidence * 100)}%`;
        }

        // Apply theme with smooth transition
        applyTheme(themeToApply);

      } catch (error) {
        console.error('Error analyzing mood:', error);
        const moodText = document.getElementById('moodText');
        if (moodText) {
          moodText.textContent = 'Could not analyze mood. Please try again.';
        }
        if (result) result.style.display = 'block';
      } finally {
        // Reset button
        if (button) {
          button.disabled = false;
          button.textContent = '✨ Analyze & Transform';
        }
      }
    }

    /**
     * Applies the given CSS variables to the document root.
     * @param {object} colors - An object containing CSS variable names and their values.
     */
    function applyTheme(colors) {
      const root = document.documentElement;

      // Special handling for --bg to ensure it applies to both html and body
      if (colors['--bg']) {
        document.body.style.background = colors['--bg'];
        root.style.setProperty('--bg', colors['--bg']); // Also set the variable for other elements that might use it
      }

      Object.entries(colors).forEach(([property, value]) => {
        if (property !== '--bg') { // Avoid setting --bg twice
          root.style.setProperty(property, value);
        }
      });
    }

    // Modal functions
    const moodModal = document.getElementById('moodThemeModal');
    const moodTrigger = document.getElementById('moodThemeTrigger');

    function openMoodModal() {
      if (moodModal) {
        moodModal.classList.add('open');
        // Re-apply theme mode state for buttons when modal opens
        setThemeMode(currentThemeMode);
      }
    }

    function closeMoodModal() {
      if (moodModal) {
        moodModal.classList.remove('open');
      }
    }

    // Close modal when clicking outside content
    if (moodModal) {
      moodModal.addEventListener('click', function (event) {
        if (event.target === moodModal) { // Check if the click was on the overlay itself
          closeMoodModal();
        }
      });
    }

    // Mobile Navigation FAB logic
    const mainMobileNavFab = document.getElementById('mainMobileNavFab');
    const mobileNavFabsContainer = document.querySelector('.mobile-nav-fabs');
    const sectionFabs = document.querySelectorAll('.mobile-nav-fabs .section-fab');

    function toggleMobileNav() {
      if (mobileNavFabsContainer.classList.contains('open')) {
        mobileNavFabsContainer.classList.remove('open');
        // Change icon back to bars after transition
        setTimeout(() => {
          mainMobileNavFab.querySelector('i').className = 'fas fa-bars';
        }, 300); // Match transition duration
      } else {
        mobileNavFabsContainer.classList.add('open');
        mainMobileNavFab.querySelector('i').className = 'fas fa-times'; // Change to close icon
      }
    }

    // Add click listeners to section FABs to scroll to section and close menu
    sectionFabs.forEach(fab => {
      fab.addEventListener('click', function (e) {
        e.preventDefault(); // Prevent default link behavior for smooth scroll
        const targetId = this.getAttribute('href').substring(1);
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
          targetSection.scrollIntoView({ behavior: 'smooth' });
          toggleMobileNav(); // Close the menu after clicking a section
        }
      });
    });

    // Initialize the theme mode and FABs on page load
    document.addEventListener('DOMContentLoaded', () => {
      // Set initial mode based on the `currentThemeMode` variable (which is 'dark' by default now)
      setThemeMode(currentThemeMode);
      // Attach click listener to mood trigger button
      if (moodTrigger) {
        moodTrigger.addEventListener('click', openMoodModal);
      }
      // Attach click listener to main mobile nav FAB
      if (mainMobileNavFab) {
        mainMobileNavFab.addEventListener('click', toggleMobileNav);
      }
    });

    // Handle floating trigger visibility on scroll
    window.addEventListener('scroll', function () {
      if (moodTrigger) { // Ensure the trigger element exists
        // Always show on mobile, show only after scroll on desktop
        if (window.innerWidth <= 768 || window.scrollY > 200) {
          moodTrigger.classList.add('show');
          if (window.innerWidth > 768) { // For desktop, only show mood trigger
            mobileNavFabsContainer.classList.remove('open'); // Ensure mobile nav is closed on desktop
          }
        } else {
          moodTrigger.classList.remove('show');
        }
      }

      // Hide mobile nav FABs on scroll-up if not already open (prevents accidental opens)
      if (window.innerWidth <= 768) {
        if (window.scrollY > 200 && !mobileNavFabsContainer.classList.contains('open')) {
          mobileNavFabsContainer.classList.remove('show'); // If you want to hide main FAB when not scrolling
        } else {
          mobileNavFabsContainer.classList.add('show');
        }
      }
    });


    // Allow Enter key to trigger analysis inside the modal
    const emotionInput = document.getElementById('emotionInput');
    if (emotionInput) { // Ensure input element exists
      emotionInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
          setThemeFromEmotion();
        }
      });
    }

    // Add some example prompts for better UX
    const examples = [
      "I'm feeling super excited about my new project!",
      "Today has been really stressful and overwhelming",
      "I'm in a peaceful, zen-like mood",
      "Feeling a bit down and melancholy",
      "I'm absolutely furious about this situation",
      "Feeling energetic and ready to conquer the world!"
    ];

    // Placeholder rotation for inspiration
    let exampleIndex = 0;
    setInterval(() => {
      const input = document.getElementById('emotionInput');
      if (input) { // Ensure input element exists
        // Only change placeholder if input is empty
        if (input.value === '') {
          input.placeholder = examples[exampleIndex];
          exampleIndex = (exampleIndex + 1) % examples.length;
        }
      }
    }, 3000);

    // Add this to your existing script
    document.addEventListener('DOMContentLoaded', function () {
      const cards = document.querySelectorAll('.slider-card, .section-card, .blog-card, .research-card, .contact-card');

      cards.forEach(card => {
        card.addEventListener('mousemove', (e) => {
          const rect = card.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;

          // Calculate rotation based on mouse position
          const rotateX = (y - rect.height / 2) / 10;
          const rotateY = (x - rect.width / 2) / 10;

          // Apply the rotation
          card.style.setProperty('--rotate-x', rotateX);
          card.style.setProperty('--rotate-y', rotateY);
        });

        card.addEventListener('mouseleave', () => {
          // Reset rotation when mouse leaves
          card.style.setProperty('--rotate-x', 0);
          card.style.setProperty('--rotate-y', 0);
        });
      });
    });

    // Add this to your existing script
    document.addEventListener('DOMContentLoaded', function () {
      const mainFab = document.getElementById('mainMobileNavFab');
      const mainFabSvg = mainFab.querySelector('svg');

      mainFab.addEventListener('click', function () {
        const isOpen = document.querySelector('.mobile-nav-fabs').classList.contains('open');
        if (isOpen) {
          mainFabSvg.innerHTML = '<path d="M4 6h16M4 12h16M4 18h16"/>';
        } else {
          mainFabSvg.innerHTML = '<path d="M6 18L18 6M6 6l12 12"/>';
        }
      });
    });

    // Theme Functions
    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      const icon = document.querySelector('.theme-switch i');
      if (document.body.classList.contains('dark-mode')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
      }
    }

    function setThemeMode(mode) {
      const lightBtn = document.getElementById('lightMode');
      const darkBtn = document.getElementById('darkMode');

      if (mode === 'light') {
        document.body.classList.remove('dark-mode');
        lightBtn.classList.add('active');
        darkBtn.classList.remove('active');
      } else {
        document.body.classList.add('dark-mode');
        darkBtn.classList.add('active');
        lightBtn.classList.remove('active');
      }
    }

    // Initialize theme controls
    document.addEventListener('DOMContentLoaded', () => {
      const themeSwitch = document.getElementById('themeSwitch');
      if (themeSwitch) {
        themeSwitch.classList.add('show');
      }

      // Show theme controls after scrolling
      window.addEventListener('scroll', () => {
        if (themeSwitch) themeSwitch.classList.add('show');
      });
    });

    // Preset themes are already defined above - removing duplicate declaration
    function applyPresetTheme(preset) {
      // For now, use direct preset selection to get basic functionality working
      const theme = presetThemes[preset];

      if (theme) {
        const mode = currentThemeMode;
        applyTheme(theme[mode]);

        // Update UI
        const result = document.getElementById('result');
        const moodText = document.getElementById('moodText');
        const confidenceFill = document.getElementById('confidenceFill');
        const confidenceText = document.getElementById('confidenceText');

        if (result && moodText && confidenceFill && confidenceText) {
          moodText.innerHTML = `<strong>Applied Theme:</strong> ${theme.name}`;
          confidenceFill.style.width = '100%';
          confidenceText.textContent = 'Preset Theme Applied';
          result.style.display = 'block';
        }
      }
    }

    function saveCurrentTheme() {
      const currentTheme = {
        name: 'Custom Theme',
        light: {},
        dark: {}
      };

      // Get current theme values
      const root = document.documentElement;
      const computedStyle = getComputedStyle(root);
      const mode = document.body.classList.contains('dark-mode') ? 'dark' : 'light';

      ['--bg', '--text', '--accent', '--secondary', '--muted', '--card-bg', '--card-border', '--hover-bg'].forEach(prop => {
        currentTheme[mode][prop] = computedStyle.getPropertyValue(prop).trim();
      });

      // Save to localStorage
      const savedThemes = JSON.parse(localStorage.getItem('savedThemes') || '[]');
      savedThemes.push(currentTheme);
      localStorage.setItem('savedThemes', JSON.stringify(savedThemes));

      // Show feedback
      const moodText = document.getElementById('moodText');
      if (moodText) {
        moodText.innerHTML += '<br><span style="color: var(--accent);">Theme saved successfully!</span>';
      }
    }

    function shareTheme() {
      const currentTheme = {
        name: 'Custom Theme',
        light: {},
        dark: {}
      };

      // Get current theme values
      const root = document.documentElement;
      const computedStyle = getComputedStyle(root);
      const mode = document.body.classList.contains('dark-mode') ? 'dark' : 'light';

      ['--bg', '--text', '--accent', '--secondary', '--muted', '--card-bg', '--card-border', '--hover-bg'].forEach(prop => {
        currentTheme[mode][prop] = computedStyle.getPropertyValue(prop).trim();
      });

      // Create shareable link
      const themeData = btoa(JSON.stringify(currentTheme));
      const shareUrl = `${window.location.origin}${window.location.pathname}?theme=${themeData}`;

      // Copy to clipboard
      navigator.clipboard.writeText(shareUrl).then(() => {
        const moodText = document.getElementById('moodText');
        if (moodText) {
          moodText.innerHTML += '<br><span style="color: var(--accent);">Theme link copied to clipboard!</span>';
        }
      });
    }

    // Theme history management functions
    function showThemeHistory() {
      const themeStats = themeManager.getThemeStats();
      const usedThemes = themeManager.usedThemes;

      let historyHTML = '<div style="margin-top: 1rem; padding: 1rem; background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 8px;">';
      historyHTML += '<h4 style="margin-bottom: 1rem; color: var(--text);">Your Theme History</h4>';

      if (Object.keys(themeStats).length === 0) {
        historyHTML += '<p style="color: var(--muted);">No themes used yet. Start exploring!</p>';
      } else {
        historyHTML += '<div style="margin-bottom: 1rem;">';
        historyHTML += '<h5 style="color: var(--text); margin-bottom: 0.5rem;">Theme Usage Count:</h5>';
        Object.entries(themeStats).forEach(([themeName, count]) => {
          historyHTML += `<div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
            <span style="color: var(--text);">${themeName}</span>
            <span style="color: var(--accent); font-weight: 500;">${count} times</span>
          </div>`;
        });
        historyHTML += '</div>';

        historyHTML += '<div>';
        historyHTML += '<h5 style="color: var(--text); margin-bottom: 0.5rem;">Recent Activity:</h5>';
        const recentThemes = usedThemes.slice(-5).reverse(); // Show last 5 themes
        recentThemes.forEach(record => {
          const date = new Date(record.timestamp).toLocaleDateString();
          const time = new Date(record.timestamp).toLocaleTimeString();
          historyHTML += `<div style="margin-bottom: 0.25rem; font-size: 0.9rem;">
            <span style="color: var(--text);">${record.name}</span>
            <span style="color: var(--muted); margin-left: 0.5rem;">(${record.moodType})</span>
            <span style="color: var(--muted); margin-left: 0.5rem; font-size: 0.8rem;">${date} ${time}</span>
          </div>`;
        });
        historyHTML += '</div>';
      }

      historyHTML += '<div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--card-border);">';
      historyHTML += '<button onclick="resetThemeHistory()" style="background: var(--accent); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">Reset History</button>';
      historyHTML += '</div>';
      historyHTML += '</div>';

      const moodText = document.getElementById('moodText');
      if (moodText) {
        moodText.innerHTML += historyHTML;
      }
    }

    function resetThemeHistory() {
      if (confirm('Are you sure you want to reset your theme history? This will allow themes to repeat again.')) {
        themeManager.usedThemes = [];
        localStorage.removeItem(`usedThemes_${themeManager.userId}`);
        themeManager.themeRotation = null; // Reset rotation
        themeManager.initializeThemeRotation();

        const moodText = document.getElementById('moodText');
        if (moodText) {
          moodText.innerHTML = '<span style="color: var(--accent);">Theme history reset successfully! You can now experience all themes again.</span>';
        }
      }
    }

    // --- PROFESSIONAL FEATURES START ---

    // 1. Interactive Canvas Background (Constellation Effect)
    const canvas = document.getElementById('canvas-bg');
    const ctx = canvas.getContext('2d');
    let width, height;
    let particles = [];

    const particleCount = window.innerWidth < 768 ? 30 : 80;
    const connectionDistance = 150;
    const mouseDistance = 200;

    class Particle {
      constructor() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = (Math.random() - 0.5) * 0.5;
        this.size = Math.random() * 2 + 1;
        this.color = `rgba(${Math.random() > 0.5 ? '59, 130, 246' : '139, 92, 246'}, ${Math.random() * 0.3 + 0.1})`;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        if (this.x < 0 || this.x > width) this.vx *= -1;
        if (this.y < 0 || this.y > height) this.vy *= -1;
      }

      draw() {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    let mouse = { x: null, y: null };
    window.addEventListener('mousemove', e => { mouse.x = e.x; mouse.y = e.y; });
    window.addEventListener('resize', initCanvas);

    function initCanvas() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
      particles = [];
      for (let i = 0; i < particleCount; i++) particles.push(new Particle());
    }

    function animateCanvas() {
      ctx.clearRect(0, 0, width, height);
      particles.forEach(p => {
        p.update();
        p.draw();
        particles.forEach(q => {
          const dx = p.x - q.x;
          const dy = p.y - q.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < connectionDistance) {
            ctx.strokeStyle = `rgba(100, 116, 139, ${0.1 * (1 - dist / connectionDistance)})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(p.x, p.y);
            ctx.lineTo(q.x, q.y);
            ctx.stroke();
          }
        });
        if (mouse.x) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < mouseDistance) {
            ctx.strokeStyle = `rgba(59, 130, 246, ${0.2 * (1 - dist / mouseDistance)})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(p.x, p.y);
            ctx.lineTo(mouse.x, mouse.y);
            ctx.stroke();
          }
        }
      });
      requestAnimationFrame(animateCanvas);
    }
    initCanvas();
    animateCanvas();

    // 2. Command Palette (Cmd+K)
    const cmdPalette = document.getElementById('cmdPalette');
    const cmdInput = document.getElementById('cmdInput');
    const cmdResults = document.getElementById('cmdResults');
    let cmdOpen = false;
    let selectedIndex = 0;

    const commands = [
      { title: 'Go to Projects', subtitle: 'View Flowguard, Autoware...', icon: '<i class="fas fa-code"></i>', action: () => { window.location.href = '#projects'; } },
      { title: 'View ML Research', subtitle: 'Quantum ML, Optimization...', icon: '<i class="fas fa-brain"></i>', action: () => { window.location.href = '#ml-research'; } },
      { title: 'Read Blog', subtitle: 'My thoughts on tech...', icon: '<i class="fas fa-rss"></i>', action: () => { window.location.href = '#tech-blog'; } },
      { title: 'Contact Me', subtitle: 'Send an email or connect...', icon: '<i class="fas fa-envelope"></i>', action: () => { window.location.href = '#contact'; } },
      { title: 'Toggle Theme', subtitle: 'Switch Dark/Light mode', icon: '<i class="fas fa-adjust"></i>', action: () => { toggleTheme(); } },
      { title: 'Copy Email', subtitle: 'nirav.sawant22@gmail.com', icon: '<i class="fas fa-copy"></i>', action: () => { navigator.clipboard.writeText('nirav.sawant22@gmail.com'); alert('Email copied!'); } },
      { title: 'View Source', subtitle: 'GitHub repository', icon: '<i class="fab fa-github"></i>', action: () => { window.open('https://github.com/NiravTech22/Portfolio-Website', '_blank'); } }
    ];

    function toggleCmdPalette() {
      cmdOpen = !cmdOpen;
      if (cmdOpen) {
        cmdPalette.classList.add('open');
        cmdInput.value = '';
        renderCommands(commands);
        cmdInput.focus();
        document.body.style.overflow = 'hidden';
      } else {
        cmdPalette.classList.remove('open');
        document.body.style.overflow = '';
      }
    }

    document.addEventListener('keydown', e => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') { e.preventDefault(); toggleCmdPalette(); }
      if (!cmdOpen) return;
      if (e.key === 'Escape') { toggleCmdPalette(); }
      else if (e.key === 'ArrowDown') { e.preventDefault(); selectedIndex = (selectedIndex + 1) % cmdResults.children.length; updateSelection(); }
      else if (e.key === 'ArrowUp') { e.preventDefault(); selectedIndex = (selectedIndex - 1 + cmdResults.children.length) % cmdResults.children.length; updateSelection(); }
      else if (e.key === 'Enter') { e.preventDefault(); const selected = cmdResults.children[selectedIndex]; if (selected) selected.click(); }
    });

    cmdPalette.addEventListener('click', e => { if (e.target === cmdPalette) toggleCmdPalette(); });
    cmdInput.addEventListener('input', e => {
      const query = e.target.value.toLowerCase();
      const filtered = commands.filter(cmd => cmd.title.toLowerCase().includes(query) || cmd.subtitle.toLowerCase().includes(query));
      selectedIndex = 0;
      renderCommands(filtered);
    });

    function renderCommands(list) {
      cmdResults.innerHTML = list.map((cmd, index) => `
        <div class="cmd-item ${index === 0 ? 'selected' : ''}" onclick="window.cmdAction(${commands.indexOf(cmd)})">
          ${cmd.icon}
          <div class="cmd-item-content">
            <span class="cmd-item-title">${cmd.title}</span>
            <span class="cmd-item-subtitle">${cmd.subtitle}</span>
          </div>
        </div>
      `).join('');
    }
    window.cmdAction = (index) => { commands[index].action(); toggleCmdPalette(); };
    function updateSelection() {
      const items = cmdResults.children;
      Array.from(items).forEach((item, i) => {
        item.classList.toggle('selected', i === selectedIndex);
        if (i === selectedIndex) item.scrollIntoView({ block: 'nearest' });
      });
    }

    // 3. Magnetic Buttons
    const magneticBtns = document.querySelectorAll('.cta button, .close-button');
    magneticBtns.forEach(btn => {
      btn.addEventListener('mousemove', e => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
      });
      btn.addEventListener('mouseleave', () => { btn.style.transform = 'translate(0, 0)'; });
    });

    // 4. Simple Theme Toggle (Light/Dark)
    function toggleTheme() {
      const body = document.body;
      const icon = document.getElementById('themeIcon');
      body.classList.toggle('light-mode');

      if (body.classList.contains('light-mode')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
        localStorage.setItem('theme', 'light');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
        localStorage.setItem('theme', 'dark');
      }
    }

    // Check saved theme preference on load
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'light') {
        document.body.classList.add('light-mode');
        document.getElementById('themeIcon').classList.replace('fa-moon', 'fa-sun');
      }
    });

  </script>
</body>

</html>